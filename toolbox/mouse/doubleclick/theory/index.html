<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">

    <title>
        鼠标双击故障检测原理 | Mouse Double Click Issue Explained
    </title>

    <meta name="description"
          content="详细解释操作系统如何判断鼠标双击，以及本工具如何检测鼠标微动老化、误双击和点击不稳定问题。Explain how mouse double click issues are detected at OS level.">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                         Roboto, "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
            background: #f7f9fc;
            color: #222;
            line-height: 1.7;
            margin: 0;
        }

        .container {
            max-width: 920px;
            margin: auto;
            padding: 32px 20px 60px;
        }

        h1, h2, h3 {
            color: #0b5ed7;
        }

        h1 {
            font-size: 28px;
        }

        h2 {
            margin-top: 40px;
            font-size: 22px;
        }

        p {
            font-size: 16px;
            margin: 10px 0;
        }

        ul {
            margin-left: 20px;
        }

        .figure {
            text-align: center;
            margin: 30px 0;
        }

        .figure img {
            max-width: 100%;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        }

        .figure svg {
            max-width: 100%;
            background: #020617;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        }

        .caption {
            font-size: 14px;
            color: #666;
            margin-top: 8px;
        }

        .highlight {
            background: #eef5ff;
            border-left: 4px solid #0b5ed7;
            padding: 14px 16px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .lang-switch {
            text-align: right;
            margin-bottom: 16px;
        }

        .lang-switch button {
            border: 1px solid #ccc;
            background: #fff;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            margin-left: 8px;
        }

        .lang-switch button.active {
            background: #0b5ed7;
            color: #fff;
            border-color: #0b5ed7;
        }

        .lang {
            display: none;
        }

        .lang.active {
            display: block;
        }

        footer {
            margin-top: 60px;
            text-align: center;
            font-size: 14px;
            color: #777;
        }
    </style>

    <script>
        function switchLang(lang) {
            document.querySelectorAll('.lang').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.lang-' + lang).forEach(el => el.classList.add('active'));

            document.querySelectorAll('.lang-switch button').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');

            document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';
        }
    </script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J9HR7CNQR9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-J9HR7CNQR9');
    </script>
</head>

<body>
<div class="container">

    <div class="lang-switch">
        <button id="btn-zh" class="active" onclick="switchLang('zh')">中文</button>
        <button id="btn-en" onclick="switchLang('en')">English</button>
    </div>

    <!-- 中文 -->
    <section class="lang lang-zh active">

        <h1>鼠标双击故障是如何被检测出来的？</h1>

        <p>
            当你<strong>只点击了一次</strong>，系统却触发了<strong>双击</strong>，
            这通常不是软件问题，而是<strong>鼠标硬件开始不稳定</strong>的信号。
        </p>

        <div class="figure">
            <img src="https://assets.starryring.com/mouse/doubleclickschematic.png" 
                 alt="鼠标双击时间轴示意图">
            <div class="caption">
                操作系统通过两次按下事件之间的时间间隔判断双击
            </div>
        </div>

        <h2>操作系统如何判断双击？</h2>

        <p>
            鼠标本身并不知道什么是"双击"，它只会上报：
        </p>

        <ul>
            <li>按下（Pressed）</li>
            <li>松开（Released）</li>
        </ul>

        <p>
            如果系统在<strong>约 500ms</strong> 内检测到<strong>两次按下</strong>，
            并且鼠标位置变化很小，就会判定为双击。
        </p>

        <div class="highlight">
            双击是<strong>操作系统的逻辑判断</strong>，不是鼠标的真实动作。
        </div>

        <h2>鼠标双击检测状态机</h2>
        
        <p>
            下面的状态图展示了操作系统检测鼠标双击的完整逻辑流程，包括硬件抖动导致的误判路径：
        </p>

        <div class="figure">
            <svg width="1100" height="720" viewBox="0 0 1100 720"
                 xmlns="http://www.w3.org/2000/svg"
                 font-family="Arial, sans-serif">

              <!-- ========== DEFINITIONS ========== -->
              <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10"
                        refX="8" refY="3" orient="auto">
                  <path d="M0,0 L0,6 L9,3 z" fill="currentColor"/>
                </marker>

                <style>
                  .state { fill:#1e293b; }
                  .active { animation:pulse 1.4s infinite; }

                  @keyframes pulse {
                    0%{filter:brightness(1)}
                    50%{filter:brightness(1.6)}
                    100%{filter:brightness(1)}
                  }

                  .flow {
                    fill:none;
                    stroke-width:3;
                    stroke-dasharray:8 6;
                    animation:flow 1.8s linear infinite;
                  }

                  @keyframes flow {
                    to { stroke-dashoffset:-28; }
                  }

                  .ok { stroke:#22c55e; }
                  .fail { stroke:#818cf8; }
                  .bad { stroke:#ef4444; }

                  .zh { display:block; }
                  .en { display:none; }

                  svg:hover .zh { display:none; }
                  svg:hover .en { display:block; }
                </style>
              </defs>

              <!-- ========== BACKGROUND ========== -->
              <rect width="1100" height="720" rx="20" fill="#020617"/>

              <!-- ========== TITLE ========== -->
              <g class="zh">
                <text x="550" y="42" text-anchor="middle"
                      font-size="22" fill="#e5e7eb" font-weight="bold">
                  输入压力测试 · 鼠标双击完整状态机
                </text>
              </g>
              <g class="en">
                <text x="550" y="42" text-anchor="middle"
                      font-size="22" fill="#e5e7eb" font-weight="bold">
                  Input Stress Test · Mouse Double Click State Machine
                </text>
              </g>

              <!-- ========== STATES ========== -->
              <!-- Idle -->
              <rect x="470" y="80" width="160" height="60" rx="12"
                    class="state active"/>
              <text x="550" y="118" text-anchor="middle" fill="#e5e7eb">Idle</text>

              <!-- First Down -->
              <rect x="180" y="190" width="220" height="70" rx="12" class="state"/>
              <text x="290" y="232" text-anchor="middle" fill="#e5e7eb">
                First Button Down
              </text>

              <!-- First Up -->
              <rect x="180" y="300" width="220" height="70" rx="12" class="state"/>
              <text x="290" y="342" text-anchor="middle" fill="#e5e7eb">
                First Button Up
              </text>

              <!-- Waiting -->
              <rect x="450" y="300" width="260" height="90" rx="14" class="state"/>
              <text x="580" y="338" text-anchor="middle" fill="#e5e7eb">
                Waiting for Second Click
              </text>
              <text x="580" y="360" text-anchor="middle" fill="#94a3b8" font-size="12">
                Double Click Timer Active
              </text>

              <!-- Second Down -->
              <rect x="800" y="300" width="220" height="70" rx="12" class="state"/>
              <text x="910" y="342" text-anchor="middle" fill="#e5e7eb">
                Second Button Down
              </text>

              <!-- Success -->
              <rect x="800" y="440" width="220" height="70" rx="12"
                    fill="#052e16"/>
              <text x="910" y="480" text-anchor="middle"
                    fill="#22c55e" font-weight="bold">
                Double Click Confirmed
              </text>

              <!-- Timeout -->
              <rect x="450" y="440" width="260" height="70" rx="12"
                    fill="#312e81"/>
              <text x="580" y="480" text-anchor="middle"
                    fill="#c7d2fe">
                Timeout / Distance Fail
              </text>

              <!-- Hardware Bounce -->
              <rect x="180" y="440" width="220" height="110" rx="12"
                    fill="#3b1d1d"/>
              <text x="290" y="472" text-anchor="middle"
                    fill="#fecaca" font-weight="bold">
                Hardware Bounce
              </text>
              <text x="290" y="494" text-anchor="middle"
                    fill="#fecaca" font-size="12">
                Contact Noise (3x)
              </text>

              <!-- ========== FLOWS ========== -->
              <path d="M550 140 L290 190" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M290 260 L290 300" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M400 335 L450 335" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M710 335 L800 335" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M910 370 L910 440" class="flow ok" marker-end="url(#arrow)"/>

              <!-- Failure -->
              <path d="M580 390 L580 440" class="flow fail" marker-end="url(#arrow)"/>

              <!-- Bounce triple -->
              <path d="M290 370 L290 420" class="flow bad" marker-end="url(#arrow)"/>
              <circle cx="260" cy="400" r="6" fill="#ef4444"/>
              <circle cx="290" cy="410" r="6" fill="#ef4444"/>
              <circle cx="320" cy="400" r="6" fill="#ef4444"/>

              <!-- Return -->
              <path d="M290 550 C290 620 550 620 550 140"
                    class="flow bad" marker-end="url(#arrow)"/>
              <path d="M580 510 C580 620 550 620 550 140"
                    class="flow fail" marker-end="url(#arrow)"/>
              <path d="M910 510 C910 620 550 620 550 140"
                    class="flow ok" marker-end="url(#arrow)"/>

              <!-- ========== METRICS PANEL ========== -->
              <rect x="760" y="80" width="300" height="160" rx="14"
                    fill="#020617" stroke="#334155"/>

              <text x="910" y="108" text-anchor="middle"
                    fill="#e5e7eb" font-weight="bold">
                Live Metrics (Simulated)
              </text>

              <text x="790" y="140" fill="#94a3b8">Interval:</text>
              <text x="950" y="140" fill="#e5e7eb" id="interval">87 ms</text>

              <text x="790" y="168" fill="#94a3b8">Clicks:</text>
              <text x="950" y="168" fill="#e5e7eb" id="clicks">2</text>

              <text x="790" y="196" fill="#94a3b8">Bounce Count:</text>
              <text x="950" y="196" fill="#ef4444" id="bounce">3</text>

              <text x="910" y="228" text-anchor="middle"
                    fill="#64748b" font-size="11">
                (Hover to switch language)
              </text>

              <!-- Footer -->
              <text x="550" y="690" text-anchor="middle"
                    fill="#64748b" font-size="13">
                Input Stress Test · Hardware noise is indistinguishable from real clicks
              </text>
            </svg>
            <div class="caption">
                鼠标双击检测的完整状态机，展示硬件抖动导致的误判路径（悬停切换语言）
            </div>
        </div>

        <h2>鼠标为什么会误触发双击？</h2>

        <p>
            当微动老化或接触不良时，一次点击可能被拆成两次极短间隔的按下，
            从而<strong>欺骗操作系统</strong>触发双击。
        </p>

        <h2>本检测工具做了什么？</h2>

        <ul>
            <li>记录每一次按下 / 松开的真实时间</li>
            <li>分析异常短间隔点击</li>
            <li>评估不同回报率下的稳定性</li>
        </ul>

        <div class="highlight">
            如果系统级"双击条件"被异常频繁满足，
            就可以判定鼠标存在潜在双击故障。
        </div>

    </section>

    <!-- English -->
    <section class="lang lang-en">

        <h1>How Mouse Double Click Issues Are Detected</h1>

        <p>
            If your system triggers a <strong>double click</strong>
            when you only clicked once,
            this is usually a sign of <strong>mouse hardware instability</strong>.
        </p>

        <div class="figure">
            <img src="42c0e868-3f7c-4b73-a3dd-726a9868fcf1.png"
                 alt="Mouse double click timing diagram">
            <div class="caption">
                Operating systems detect double clicks based on timing between presses
            </div>
        </div>

        <h2>How does the operating system detect a double click?</h2>

        <p>
            A mouse only reports two basic events:
        </p>

        <ul>
            <li>Button pressed</li>
            <li>Button released</li>
        </ul>

        <p>
            If two <strong>press events</strong> occur within a short time window
            (typically around <strong>500ms</strong>),
            the operating system interprets it as a double click.
        </p>

        <div class="highlight">
            A double click is a <strong>software-level interpretation</strong>,
            not a physical mouse action.
        </div>

        <h2>Mouse Double Click Detection State Machine</h2>
        
        <p>
            The state diagram below shows the complete logic flow of how the operating system detects mouse double clicks, including false trigger paths due to hardware bounce:
        </p>

        <div class="figure">
            <svg width="1100" height="720" viewBox="0 0 1100 720"
                 xmlns="http://www.w3.org/2000/svg"
                 font-family="Arial, sans-serif">

              <!-- ========== DEFINITIONS ========== -->
              <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10"
                        refX="8" refY="3" orient="auto">
                  <path d="M0,0 L0,6 L9,3 z" fill="currentColor"/>
                </marker>

                <style>
                  .state { fill:#1e293b; }
                  .active { animation:pulse 1.4s infinite; }

                  @keyframes pulse {
                    0%{filter:brightness(1)}
                    50%{filter:brightness(1.6)}
                    100%{filter:brightness(1)}
                  }

                  .flow {
                    fill:none;
                    stroke-width:3;
                    stroke-dasharray:8 6;
                    animation:flow 1.8s linear infinite;
                  }

                  @keyframes flow {
                    to { stroke-dashoffset:-28; }
                  }

                  .ok { stroke:#22c55e; }
                  .fail { stroke:#818cf8; }
                  .bad { stroke:#ef4444; }

                  .zh { display:block; }
                  .en { display:none; }

                  svg:hover .zh { display:none; }
                  svg:hover .en { display:block; }
                </style>
              </defs>

              <!-- ========== BACKGROUND ========== -->
              <rect width="1100" height="720" rx="20" fill="#020617"/>

              <!-- ========== TITLE ========== -->
              <g class="zh">
                <text x="550" y="42" text-anchor="middle"
                      font-size="22" fill="#e5e7eb" font-weight="bold">
                  输入压力测试 · 鼠标双击完整状态机
                </text>
              </g>
              <g class="en">
                <text x="550" y="42" text-anchor="middle"
                      font-size="22" fill="#e5e7eb" font-weight="bold">
                  Input Stress Test · Mouse Double Click State Machine
                </text>
              </g>

              <!-- ========== STATES ========== -->
              <!-- Idle -->
              <rect x="470" y="80" width="160" height="60" rx="12"
                    class="state active"/>
              <text x="550" y="118" text-anchor="middle" fill="#e5e7eb">Idle</text>

              <!-- First Down -->
              <rect x="180" y="190" width="220" height="70" rx="12" class="state"/>
              <text x="290" y="232" text-anchor="middle" fill="#e5e7eb">
                First Button Down
              </text>

              <!-- First Up -->
              <rect x="180" y="300" width="220" height="70" rx="12" class="state"/>
              <text x="290" y="342" text-anchor="middle" fill="#e5e7eb">
                First Button Up
              </text>

              <!-- Waiting -->
              <rect x="450" y="300" width="260" height="90" rx="14" class="state"/>
              <text x="580" y="338" text-anchor="middle" fill="#e5e7eb">
                Waiting for Second Click
              </text>
              <text x="580" y="360" text-anchor="middle" fill="#94a3b8" font-size="12">
                Double Click Timer Active
              </text>

              <!-- Second Down -->
              <rect x="800" y="300" width="220" height="70" rx="12" class="state"/>
              <text x="910" y="342" text-anchor="middle" fill="#e5e7eb">
                Second Button Down
              </text>

              <!-- Success -->
              <rect x="800" y="440" width="220" height="70" rx="12"
                    fill="#052e16"/>
              <text x="910" y="480" text-anchor="middle"
                    fill="#22c55e" font-weight="bold">
                Double Click Confirmed
              </text>

              <!-- Timeout -->
              <rect x="450" y="440" width="260" height="70" rx="12"
                    fill="#312e81"/>
              <text x="580" y="480" text-anchor="middle"
                    fill="#c7d2fe">
                Timeout / Distance Fail
              </text>

              <!-- Hardware Bounce -->
              <rect x="180" y="440" width="220" height="110" rx="12"
                    fill="#3b1d1d"/>
              <text x="290" y="472" text-anchor="middle"
                    fill="#fecaca" font-weight="bold">
                Hardware Bounce
              </text>
              <text x="290" y="494" text-anchor="middle"
                    fill="#fecaca" font-size="12">
                Contact Noise (3x)
              </text>

              <!-- ========== FLOWS ========== -->
              <path d="M550 140 L290 190" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M290 260 L290 300" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M400 335 L450 335" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M710 335 L800 335" class="flow ok" marker-end="url(#arrow)"/>
              <path d="M910 370 L910 440" class="flow ok" marker-end="url(#arrow)"/>

              <!-- Failure -->
              <path d="M580 390 L580 440" class="flow fail" marker-end="url(#arrow)"/>

              <!-- Bounce triple -->
              <path d="M290 370 L290 420" class="flow bad" marker-end="url(#arrow)"/>
              <circle cx="260" cy="400" r="6" fill="#ef4444"/>
              <circle cx="290" cy="410" r="6" fill="#ef4444"/>
              <circle cx="320" cy="400" r="6" fill="#ef4444"/>

              <!-- Return -->
              <path d="M290 550 C290 620 550 620 550 140"
                    class="flow bad" marker-end="url(#arrow)"/>
              <path d="M580 510 C580 620 550 620 550 140"
                    class="flow fail" marker-end="url(#arrow)"/>
              <path d="M910 510 C910 620 550 620 550 140"
                    class="flow ok" marker-end="url(#arrow)"/>

              <!-- ========== METRICS PANEL ========== -->
              <rect x="760" y="80" width="300" height="160" rx="14"
                    fill="#020617" stroke="#334155"/>

              <text x="910" y="108" text-anchor="middle"
                    fill="#e5e7eb" font-weight="bold">
                Live Metrics (Simulated)
              </text>

              <text x="790" y="140" fill="#94a3b8">Interval:</text>
              <text x="950" y="140" fill="#e5e7eb" id="interval">87 ms</text>

              <text x="790" y="168" fill="#94a3b8">Clicks:</text>
              <text x="950" y="168" fill="#e5e7eb" id="clicks">2</text>

              <text x="790" y="196" fill="#94a3b8">Bounce Count:</text>
              <text x="950" y="196" fill="#ef4444" id="bounce">3</text>

              <text x="910" y="228" text-anchor="middle"
                    fill="#64748b" font-size="11">
                (Hover to switch language)
              </text>

              <!-- Footer -->
              <text x="550" y="690" text-anchor="middle"
                    fill="#64748b" font-size="13">
                Input Stress Test · Hardware noise is indistinguishable from real clicks
              </text>
            </svg>
            <div class="caption">
                Complete state machine of double click detection, showing false trigger paths due to hardware bounce (hover to switch language)
            </div>
        </div>

        <h2>Why do faulty mice cause false double clicks?</h2>

        <p>
            When the switch inside the mouse wears out,
            a single physical click may generate multiple rapid press signals,
            causing the OS to falsely detect a double click.
        </p>

        <h2>What does this testing tool analyze?</h2>

        <ul>
            <li>Exact timing of every press and release</li>
            <li>Abnormally short click intervals</li>
            <li>Stability under different polling rates</li>
        </ul>

        <div class="highlight">
            If OS-level double click conditions are met abnormally often,
            the mouse is likely experiencing a hardware double-click issue.
        </div>

    </section>

    <footer>
        Mouse Input Diagnostics · Hardware-Level Click Stability Analysis
    </footer>

</div>
</body>
</html>